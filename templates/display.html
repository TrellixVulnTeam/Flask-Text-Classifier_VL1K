<!DOCTYPE html>
<!-- extend from base layout -->
{% extends "base.html" %}
{% block content %}
    <div class="container">
    <div class="row">
        <h1>Word Cloud</h1>
        <div class="row">
            <div id="canvas-container" align="center" class="col-md-6">
                <canvas id="canvas" height = "500px" width="500px"></canvas>
            </div>
            <div id="canvas-container" align="center" class="col-md-6">
                <canvas id="canvas2" height = "500px" width="500px"></canvas>
            </div>
        </div>

        <div class="row">
            <h1>Accuracy on dev test</h1>
            <div id="guage" style="width: 400px;height:300px;"></div>
            <script type="text/javascript">
                $(function () {
                    // 基于准备好的dom，初始化echarts实例
                    let guageChart = echarts.init(document.getElementById('guage'));
                    $.ajax({
                        url:'/getDevAcc',
                        success:function (data) {
                            json_data=JSON.parse(data)
                            // 指定图表的配置项和数据
                            option = {
                                series: [{
                                    name: 'Machine Time',
                                    type: 'gauge',
                                    splitNumber: 10,
                                    axisLine: {
                                        lineStyle: {
                                            color: [
                                                [0.2, '#228b22'],
                                                [0.8, '#48b'],
                                                [1, '#ff4500']
                                            ],
                                            width: 8
                                        }
                                    },
                                    axisTick: {
                                        splitNumber: 10,
                                        length: 12,
                                        lineStyle: {
                                            color: 'auto'
                                        }
                                    },
                                    axisLabel: {
                                        textStyle: {
                                            color: 'auto'
                                        }
                                    },
                                    splitLine: {
                                        show: true,
                                        length: 30,
                                        lineStyle: {
                                            color: 'auto'
                                        }
                                    },
                                    pointer: {
                                        width: 3
                                    },
                                    detail: {
                                        fontSize: 18,
                                        formatter: '{value}%',
                                        textStyle: {
                                            color: 'auto',
                                            fontWeight: 'bolder'
                                        }
                                    },
                                    data: [{
                                        value: json_data["accuracy"],
                                        name: 'Accuracy',
                                    }]
                                }]
                            };
                            guageChart.setOption(option, true);


                            var options = eval({
                                "list": json_data['wc_list'],
                                "gridSize": 16, // size of the grid in pixels
                                "weightFactor": 10, // number to multiply for size of each word in the list
                                "fontWeight": 'normal', // 'normal', 'bold' or a callback
                                "fontFamily": 'Times, serif', // font to use
                                "color": 'random-light', // 'random-dark' or 'random-light'
                                "backgroundColor": '#333', // the color of canvas
                                "rotateRatio": 1 // probability for the word to rotate. 1 means always rotate
                            });
                            var canvas = document.getElementById('canvas');
                            WordCloud(canvas, options);

                            var option2 = eval({
                                "list": json_data['wc_inv'],
                                "gridSize": 16, // size of the grid in pixels
                                "weightFactor": 10, // number to multiply for size of each word in the list
                                "fontWeight": 'normal', // 'normal', 'bold' or a callback
                                "fontFamily": 'Times, serif', // font to use
                                "color": 'random-light', // 'random-dark' or 'random-light'
                                "backgroundColor": '#333', // the color of canvas
                                "rotateRatio": 1 // probability for the word to rotate. 1 means always rotate
                            });
                            var canvas = document.getElementById('canvas2');
                            WordCloud(canvas, option2);

                        }
                    })
                })
            </script>
        </div>

        <div class="row">
            <h1>Weight of 5 Best and 5 Worst features</h1>
            <div id="weight_feature" style="width: 1200px;height:300px;"></div>
            <script type="text/javascript">
                $(function () {
                    // 基于准备好的dom，初始化echarts实例
                    var myChart = echarts.init(document.getElementById('weight_feature'));
                    $.ajax({
                        url:'/getdata',
                        success:function (data) {
                            json_data=JSON.parse(data)
                            // 指定图表的配置项和数据
                            var option = {

                                tooltip: {},
                                xAxis: {
                                    data: json_data['feature']
                                },
                                yAxis: {},
                                series: [{
                                    name: 'weight',
                                    type: 'bar',
                                    data: json_data['value']
                                }]
                            };
                            myChart.setOption(option);
                        }
                    })
                })
            </script>
        </div>
    </div>
{% endblock %}


